{"ast":null,"code":"import _regeneratorRuntime from\"/root/react-apps/back_end/be-youtiful/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/root/react-apps/back_end/be-youtiful/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/root/react-apps/back_end/be-youtiful/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from\"react\";import bookingContext from'./bookingContext';import uuid from'uuid';import bookingReducer from'./bookingReducer';import{ADD_BOOKING,DELETE_BOOKING,SET_CURRENT,CLEAR_CURRENT,UPDATE_BOOKING,FILTER_BOOKING,CLEAR_FILTER,BOOKING_ERROR,GET_BOOKINGS,CLEAR_BOOKING}from'../types';import Axios from\"axios\";var BookingState=function BookingState(props){var initialState={bookings:null,current:null,filtered:null,error:null};var _useReducer=useReducer(bookingReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];//Get Bookings\nvar getBookings=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Axios.get('/api/bookings');case 3:res=_context.sent;dispatch({type:GET_BOOKINGS,payload:res.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);dispatch({type:BOOKING_ERROR,payload:_context.t0.response.data.msg});case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function getBookings(){return _ref.apply(this,arguments);};}();//add booking\nvar addBooking=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(booking){var config,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:config={headers:{'Content-Type':'application/json'}};_context2.prev=1;_context2.next=4;return Axios.post('/api/bookings',booking,config);case 4:res=_context2.sent;dispatch({type:ADD_BOOKING,payload:res.data});_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](1);dispatch({type:BOOKING_ERROR,payload:_context2.t0.response.data.msg});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[1,8]]);}));return function addBooking(_x){return _ref2.apply(this,arguments);};}();//delete booking\nvar deleteBooking=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return Axios.delete(\"/api/bookings/\".concat(id));case 3:dispatch({type:DELETE_BOOKING,payload:id});_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);dispatch({type:BOOKING_ERROR,payload:_context3.t0.response.data.msg});case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function deleteBooking(_x2){return _ref3.apply(this,arguments);};}();//update booking\nvar updateBooking=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(booking){var config,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:config={headers:{'Content-Type':'application/json'}};_context4.prev=1;_context4.next=4;return Axios.put(\"/api/bookings/\".concat(booking._id),booking,config);case 4:res=_context4.sent;dispatch({type:UPDATE_BOOKING,payload:res.data});_context4.next=12;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](1);dispatch({type:BOOKING_ERROR,payload:_context4.t0.response.data.msg});console.log(_context4.t0.response.data.msg);case 12:case\"end\":return _context4.stop();}}},_callee4,null,[[1,8]]);}));return function updateBooking(_x3){return _ref4.apply(this,arguments);};}();//Clear Bookings\nvar clearBookings=function clearBookings(){dispatch({type:CLEAR_BOOKING});};//set current booking\nvar setCurrent=function setCurrent(booking){dispatch({type:SET_CURRENT,payload:booking});};//clear current booking\nvar clearCurrent=function clearCurrent(){dispatch({type:CLEAR_CURRENT});};//filter booking\nvar filterBookings=function filterBookings(text){dispatch({type:FILTER_BOOKING,payload:text});};//clear filter\nvar clearFilter=function clearFilter(){dispatch({type:CLEAR_FILTER});};return React.createElement(bookingContext.Provider,{value:{bookings:state.bookings,current:state.current,filtered:state.filtered,error:state.error,addBooking:addBooking,deleteBooking:deleteBooking,setCurrent:setCurrent,clearCurrent:clearCurrent,updateBooking:updateBooking,filterBookings:filterBookings,clearFilter:clearFilter,getBookings:getBookings,clearBookings:clearBookings}},props.children);};export default BookingState;","map":{"version":3,"sources":["/root/react-apps/back_end/be-youtiful/src/context/booking/BookingState.js"],"names":["React","useReducer","bookingContext","uuid","bookingReducer","ADD_BOOKING","DELETE_BOOKING","SET_CURRENT","CLEAR_CURRENT","UPDATE_BOOKING","FILTER_BOOKING","CLEAR_FILTER","BOOKING_ERROR","GET_BOOKINGS","CLEAR_BOOKING","Axios","BookingState","props","initialState","bookings","current","filtered","error","state","dispatch","getBookings","get","res","type","payload","data","response","msg","addBooking","booking","config","headers","post","deleteBooking","id","delete","updateBooking","put","_id","console","log","clearBookings","setCurrent","clearCurrent","filterBookings","text","clearFilter","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from \"react\";\nimport bookingContext from './bookingContext';\nimport uuid from 'uuid';\nimport bookingReducer from './bookingReducer';\nimport {\n    ADD_BOOKING,\n    DELETE_BOOKING,\n    SET_CURRENT,\n    CLEAR_CURRENT,\n    UPDATE_BOOKING,\n    FILTER_BOOKING,\n    CLEAR_FILTER,\n    BOOKING_ERROR,\n    GET_BOOKINGS,\n    CLEAR_BOOKING\n} from '../types'\nimport Axios from \"axios\";\n \nconst BookingState = props =>{\n    const initialState ={\n        bookings:null,\n        current: null,\n        filtered: null,\n        error: null\n    };\n\n    const [state, dispatch] = useReducer(bookingReducer, initialState);\n\n    //Get Bookings\n    const getBookings = async () =>{\n        \n        try {\n            const res = await Axios.get('/api/bookings');\n            dispatch({\n                 type: GET_BOOKINGS, \n                payload: res.data\n            });\n        } catch (err) {\n            dispatch({\n                type:BOOKING_ERROR,\n                payload: err.response.data.msg\n            })\n        }\n    }\n\n    //add booking\n    const addBooking = async booking =>{\n        const config = {\n            headers:{\n                'Content-Type': 'application/json'\n            }\n        }\n\n        try {\n            const res = await Axios.post('/api/bookings', booking, config);\n            dispatch({\n                 type: ADD_BOOKING, \n                payload: res.data\n            });\n        } catch (err) {\n            dispatch({\n                type:BOOKING_ERROR,\n                payload: err.response.data.msg\n            })\n        }\n\n        \n    }\n\n    //delete booking\n    const deleteBooking =async id =>{\n        try {\n            await Axios.delete(`/api/bookings/${id}`);\n            dispatch({\n                 type: DELETE_BOOKING,\n                  payload: id \n                })\n            \n        } catch (err) {\n            dispatch({\n                type:BOOKING_ERROR,\n                payload: err.response.data.msg\n            })\n        }\n        \n    }\n\n    //update booking\n    const updateBooking = async (booking)=>{\n        const config = {\n            headers:{\n                'Content-Type': 'application/json'\n            }\n        }\n\n        try {\n            const res = await Axios.put(`/api/bookings/${booking._id}`, booking, config);\n            dispatch({\n                 type: UPDATE_BOOKING,\n                  payload: res.data\n                })\n\n        } catch (err) {\n            dispatch({\n                type:BOOKING_ERROR,\n                payload: err.response.data.msg\n            })\n            console.log(err.response.data.msg)\n        }\n        \n        \n    }\n\n    //Clear Bookings\n    const clearBookings = () =>{\n        dispatch({\n            type: CLEAR_BOOKING\n        })\n    }\n\n    //set current booking\n    const setCurrent = booking =>{\n        \n        dispatch({ type: SET_CURRENT, payload: booking })\n    }\n    //clear current booking\n    const clearCurrent = ()=>{\n        \n        dispatch({ type: CLEAR_CURRENT})\n    }\n    \n\n    //filter booking\n    const filterBookings = (text)=>{\n        \n        dispatch({ type: FILTER_BOOKING, payload: text})\n    }\n    //clear filter\n    const clearFilter = ()=>{\n        \n        dispatch({ type: CLEAR_FILTER})\n    }\n    \n    return(\n        <bookingContext.Provider\n            value={{\n                bookings : state.bookings,\n                current: state.current,\n                filtered: state.filtered,\n                error: state.error,\n                addBooking,\n                deleteBooking,\n                setCurrent,\n                clearCurrent,\n                updateBooking,\n                filterBookings,\n                clearFilter, getBookings,\n                clearBookings\n            }}\n        >\n            {props.children}\n        </bookingContext.Provider>\n    )\n\n\n}\n\n\nexport default BookingState;"]},"metadata":{},"sourceType":"module"}